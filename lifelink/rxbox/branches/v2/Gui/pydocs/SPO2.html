
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module SPO2</title>
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>SPO2</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/home/oneil/Desktop/Gui/SPO2.py">/home/oneil/Desktop/Gui/SPO2.py</a></font></td></tr></table>
    <p></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="serial.html">serial</a><br>
</td><td width="25%" valign=top><a href="time.html">time</a><br>
</td><td width="25%" valign=top></td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="SPO2.html#SPO2">SPO2</a>
</font></dt></dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="SPO2">class <strong>SPO2</strong></a></font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>manages&nbsp;data&nbsp;request&nbsp;and&nbsp;processes&nbsp;reply&nbsp;packets&nbsp;to/from&nbsp;the&nbsp;<a href="#SPO2">SPO2</a>&nbsp;module<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="SPO2-CloseSerial"><strong>CloseSerial</strong></a>(self)</dt><dd><tt>Method&nbsp;closes&nbsp;an&nbsp;open&nbsp;serial&nbsp;port&nbsp;instance</tt></dd></dl>

<dl><dt><a name="SPO2-OpenSerial"><strong>OpenSerial</strong></a>(self)</dt><dd><tt>Method&nbsp;will&nbsp;try&nbsp;to&nbsp;open&nbsp;a&nbsp;serial&nbsp;port&nbsp;for&nbsp;communication&nbsp;if&nbsp;possible.<br>
If&nbsp;not,&nbsp;error&nbsp;is&nbsp;printed&nbsp;in&nbsp;the&nbsp;python&nbsp;shell</tt></dd></dl>

<dl><dt><a name="SPO2-POST"><strong>POST</strong></a>(self)</dt><dd><tt><a href="#SPO2-POST">POST</a>()&nbsp;-&gt;&nbsp;'True'&nbsp;if&nbsp;module&nbsp;is&nbsp;powered&nbsp;on,&nbsp;'False'&nbsp;otherwise<br>
&nbsp;<br>
This&nbsp;method&nbsp;resets&nbsp;the&nbsp;<a href="#SPO2">SPO2</a>&nbsp;module.&nbsp;After&nbsp;reset,&nbsp;the&nbsp;reply&nbsp;packet&nbsp;is&nbsp;read&nbsp;and&nbsp;method<br>
test_power&nbsp;is&nbsp;called&nbsp;to&nbsp;check&nbsp;whether&nbsp;the&nbsp;<a href="#SPO2">SPO2</a>&nbsp;module&nbsp;is&nbsp;powered&nbsp;on&nbsp;and&nbsp;is&nbsp;transmitting<br>
data&nbsp;to&nbsp;the&nbsp;RxBox.&nbsp;If&nbsp;module&nbsp;is&nbsp;powered&nbsp;on,&nbsp;Serial&nbsp;number&nbsp;and&nbsp;Firmware&nbsp;version<br>
are&nbsp;extracted&nbsp;from&nbsp;the&nbsp;reply&nbsp;and&nbsp;method&nbsp;returns&nbsp;'True'&nbsp;logic&nbsp;value.&nbsp;Otherwise,<br>
'False'&nbsp;is&nbsp;returned.</tt></dd></dl>

<dl><dt><a name="SPO2-__init__"><strong>__init__</strong></a>(self, parent, port<font color="#909090">='COM5'</font>, baud<font color="#909090">=9600</font>, timeout<font color="#909090">=5</font>)</dt><dd><tt>Initialize&nbsp;port&nbsp;settings&nbsp;and&nbsp;request&nbsp;according<br>
to&nbsp;the&nbsp;specified&nbsp;setting&nbsp;for&nbsp;ChipOx</tt></dd></dl>

<dl><dt><a name="SPO2-byte_destuff"><strong>byte_destuff</strong></a>(self, data)</dt><dd><tt>Extracts&nbsp;<a href="#SPO2">SPO2</a>&nbsp;and&nbsp;BPM&nbsp;reading&nbsp;from&nbsp;packet&nbsp;'data'.&nbsp;Data&nbsp;are&nbsp;stored<br>
in&nbsp;an&nbsp;instance&nbsp;attribute</tt></dd></dl>

<dl><dt><a name="SPO2-byte_stuff"><strong>byte_stuff</strong></a>(self, data)</dt><dd><tt>filter&nbsp;the&nbsp;data&nbsp;stream&nbsp;for&nbsp;reserved&nbsp;flags<br>
return&nbsp;a&nbsp;list&nbsp;(of&nbsp;char&nbsp;strings)&nbsp;for&nbsp;byte-stuffed&nbsp;data&nbsp;sequence</tt></dd></dl>

<dl><dt><a name="SPO2-check_device_status"><strong>check_device_status</strong></a>(self)</dt><dd><tt><a href="#SPO2-check_device_status">check_device_status</a>()<br>
&nbsp;<br>
Method&nbsp;determines&nbsp;the&nbsp;status&nbsp;of&nbsp;the&nbsp;device&nbsp;based&nbsp;on&nbsp;the<br>
status&nbsp;transmitted&nbsp;by&nbsp;the&nbsp;module.&nbsp;Method&nbsp;will&nbsp;only&nbsp;check<br>
bits&nbsp;that&nbsp;are&nbsp;related&nbsp;to&nbsp;device&nbsp;ready&nbsp;cases&nbsp;and&nbsp;NOT&nbsp;for<br>
the&nbsp;patient&nbsp;ready&nbsp;case.</tt></dd></dl>

<dl><dt><a name="SPO2-check_patient_status"><strong>check_patient_status</strong></a>(self)</dt><dd><tt><a href="#SPO2-check_device_status">check_device_status</a>()<br>
&nbsp;<br>
Method&nbsp;determines&nbsp;the&nbsp;status&nbsp;of&nbsp;the&nbsp;sensor&nbsp;based&nbsp;on&nbsp;the<br>
status&nbsp;transmitted&nbsp;by&nbsp;the&nbsp;module.&nbsp;Method&nbsp;will&nbsp;only&nbsp;check<br>
bits&nbsp;that&nbsp;are&nbsp;related&nbsp;to&nbsp;patient&nbsp;ready&nbsp;cases&nbsp;and&nbsp;NOT&nbsp;for<br>
the&nbsp;device&nbsp;ready&nbsp;case.</tt></dd></dl>

<dl><dt><a name="SPO2-check_power"><strong>check_power</strong></a>(self)</dt><dd><tt><a href="#SPO2-check_power">check_power</a>()<br>
&nbsp;<br>
Method&nbsp;determines&nbsp;if&nbsp;the&nbsp;packet&nbsp;received&nbsp;from&nbsp;the&nbsp;module&nbsp;are&nbsp;valid<br>
or&nbsp;if&nbsp;the&nbsp;packet&nbsp;is&nbsp;complete.</tt></dd></dl>

<dl><dt><a name="SPO2-checksum"><strong>checksum</strong></a>(self, packet)</dt><dd><tt><a href="#SPO2-checksum">checksum</a>(packet)&nbsp;-&gt;&nbsp;[CShi,&nbsp;CSlo]<br>
&nbsp;<br>
Calculates&nbsp;the&nbsp;CRC&nbsp;for&nbsp;a&nbsp;list&nbsp;of&nbsp;data&nbsp;from&nbsp;the&nbsp;ChipOx&nbsp;module.<br>
A&nbsp;packet&nbsp;for&nbsp;the&nbsp;<a href="#SPO2">SPO2</a>&nbsp;module&nbsp;generally&nbsp;consists&nbsp;of:<br>
[&nbsp;&lt;Start&nbsp;Flag&gt;&lt;data&gt;&lt;checksum&gt;&lt;End&nbsp;Flag&gt;]<br>
&nbsp;<br>
Input:&nbsp;data&nbsp;in&nbsp;packet&nbsp;-&gt;&nbsp;a&nbsp;list&nbsp;of&nbsp;data&nbsp;in&nbsp;hex<br>
Outputs:&nbsp;[CShi,&nbsp;CSlo]&nbsp;-&gt;&nbsp;checksum&nbsp;bytes&nbsp;in&nbsp;hex<br>
&nbsp;<br>
Method:<br>
&nbsp;&nbsp;&nbsp;&nbsp;CS&nbsp;=&nbsp;checksum&nbsp;=&nbsp;sum&nbsp;of&nbsp;Higher&nbsp;byte&nbsp;shifted&nbsp;8&nbsp;bits&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;right&nbsp;AND&nbsp;with&nbsp;0xFF00&nbsp;+&nbsp;Lower&nbsp;byte&nbsp;AND&nbsp;with&nbsp;0x00FF&nbsp;&nbsp;+<br>
&nbsp;&nbsp;&nbsp;&nbsp;current&nbsp;hex&nbsp;data&nbsp;value<br>
&nbsp;&nbsp;&nbsp;&nbsp;CSlo&nbsp;=&nbsp;lower&nbsp;byte&nbsp;=&nbsp;lower&nbsp;byte&nbsp;of&nbsp;checksum<br>
&nbsp;&nbsp;&nbsp;&nbsp;CShi&nbsp;=&nbsp;higher&nbsp;byte&nbsp;of&nbsp;checksum&nbsp;+&nbsp;(CSlo&nbsp;XOR&nbsp;current&nbsp;hex&nbsp;data)</tt></dd></dl>

<dl><dt><a name="SPO2-device_ready"><strong>device_ready</strong></a>(self)</dt><dd><tt><a href="#SPO2-device_ready">device_ready</a>()<br>
&nbsp;<br>
Method&nbsp;determines&nbsp;if&nbsp;the&nbsp;the&nbsp;sensor&nbsp;is&nbsp;properly&nbsp;attached&nbsp;to<br>
the&nbsp;module.&nbsp;A&nbsp;status&nbsp;check&nbsp;is&nbsp;initiated&nbsp;by&nbsp;the&nbsp;module<br>
to&nbsp;determine&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;device&nbsp;and&nbsp;the&nbsp;sensor.</tt></dd></dl>

<dl><dt><a name="SPO2-get"><strong>get</strong></a>(self)</dt></dl>

<dl><dt><a name="SPO2-get_reply"><strong>get_reply</strong></a>(self)</dt><dd><tt><a href="#SPO2-get_reply">get_reply</a>()&nbsp;-&gt;&nbsp;returns&nbsp;one&nbsp;complete&nbsp;packet<br>
&nbsp;<br>
Method&nbsp;reads&nbsp;data&nbsp;from&nbsp;the&nbsp;serial&nbsp;port&nbsp;and&nbsp;requires&nbsp;a&nbsp;complete<br>
packet&nbsp;to&nbsp;return&nbsp;to&nbsp;the&nbsp;call.&nbsp;If&nbsp;serial&nbsp;port&nbsp;times&nbsp;out,&nbsp;None&nbsp;type<br>
is&nbsp;returned&nbsp;to&nbsp;indicate&nbsp;the&nbsp;time&nbsp;out.</tt></dd></dl>

<dl><dt><a name="SPO2-packet_to_string"><strong>packet_to_string</strong></a>(self, packet)</dt><dd><tt><a href="#SPO2-packet_to_string">packet_to_string</a>(packet)&nbsp;-&gt;&nbsp;string&nbsp;equivalent&nbsp;of&nbsp;list&nbsp;packet<br>
&nbsp;<br>
Method&nbsp;is&nbsp;used&nbsp;to&nbsp;convert&nbsp;a&nbsp;packet&nbsp;to&nbsp;be&nbsp;transmitted&nbsp;to<br>
the&nbsp;module&nbsp;to&nbsp;a&nbsp;string.&nbsp;Writing&nbsp;to&nbsp;the&nbsp;serial&nbsp;port&nbsp;requires<br>
a&nbsp;string&nbsp;so&nbsp;the&nbsp;list&nbsp;of&nbsp;commands&nbsp;should&nbsp;be&nbsp;converted&nbsp;first<br>
before&nbsp;it&nbsp;is&nbsp;transmitted.</tt></dd></dl>

<dl><dt><a name="SPO2-parse_packet"><strong>parse_packet</strong></a>(self, packet)</dt><dd><tt>Checks&nbsp;if&nbsp;packet&nbsp;is&nbsp;not&nbsp;empty&nbsp;and&nbsp;the&nbsp;signal&nbsp;quality&nbsp;is&nbsp;&lt;&nbsp;100.<br>
Corresponding&nbsp;packet&nbsp;numbers&nbsp;for&nbsp;spo2&nbsp;and&nbsp;bpm&nbsp;are&nbsp;retrieved&nbsp;and&nbsp;<br>
appended&nbsp;to&nbsp;self.<strong>current_spo2</strong>&nbsp;and&nbsp;self.<strong>current_bpm</strong>&nbsp;respectively</tt></dd></dl>

<dl><dt><a name="SPO2-patient_ready"><strong>patient_ready</strong></a>(self)</dt><dd><tt><a href="#SPO2-patient_ready">patient_ready</a>()<br>
&nbsp;<br>
Method&nbsp;determines&nbsp;if&nbsp;the&nbsp;the&nbsp;sensor&nbsp;is&nbsp;properly&nbsp;attached&nbsp;to<br>
the&nbsp;patient.&nbsp;A&nbsp;status&nbsp;check&nbsp;is&nbsp;initiated&nbsp;by&nbsp;the&nbsp;module<br>
to&nbsp;determine&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;patient&nbsp;and&nbsp;the&nbsp;sensor.</tt></dd></dl>

<dl><dt><a name="SPO2-reset"><strong>reset</strong></a>(self)</dt><dd><tt>reset&nbsp;serial&nbsp;port&nbsp;input&nbsp;buffer</tt></dd></dl>

<dl><dt><a name="SPO2-send_request"><strong>send_request</strong></a>(self)</dt><dd><tt>Continuously&nbsp;acquire&nbsp;<a href="#SPO2">SPO2</a>&nbsp;and&nbsp;BPM&nbsp;readings&nbsp;from&nbsp;the&nbsp;module</tt></dd></dl>

<dl><dt><a name="SPO2-string_to_packet"><strong>string_to_packet</strong></a>(self, string)</dt><dd><tt><a href="#SPO2-string_to_packet">string_to_packet</a>(string)&nbsp;-&gt;&nbsp;equivalent&nbsp;list&nbsp;of&nbsp;binary&nbsp;data&nbsp;of&nbsp;string<br>
&nbsp;<br>
Method&nbsp;converts&nbsp;the&nbsp;replies&nbsp;transmitted&nbsp;by&nbsp;the&nbsp;module&nbsp;to<br>
a&nbsp;list&nbsp;of&nbsp;bytes.&nbsp;The&nbsp;data&nbsp;read&nbsp;from&nbsp;the&nbsp;serial&nbsp;port&nbsp;is<br>
string&nbsp;so&nbsp;it&nbsp;needs&nbsp;to&nbsp;be&nbsp;converted&nbsp;to&nbsp;a&nbsp;list&nbsp;to&nbsp;be&nbsp;able<br>
to&nbsp;process&nbsp;the&nbsp;data&nbsp;contained&nbsp;by&nbsp;the&nbsp;packets.</tt></dd></dl>

<dl><dt><a name="SPO2-test_device_ready"><strong>test_device_ready</strong></a>(self)</dt><dd><tt><a href="#SPO2-test_device_ready">test_device_ready</a>()<br>
&nbsp;<br>
Method&nbsp;gets&nbsp;reply&nbsp;from&nbsp;the&nbsp;module&nbsp;and&nbsp;determines&nbsp;if&nbsp;the<br>
the&nbsp;reply&nbsp;is&nbsp;valid&nbsp;or&nbsp;if&nbsp;the&nbsp;serial&nbsp;port&nbsp;timed&nbsp;out.</tt></dd></dl>

<dl><dt><a name="SPO2-test_patient_ready"><strong>test_patient_ready</strong></a>(self)</dt><dd><tt><a href="#SPO2-test_patient_ready">test_patient_ready</a>()<br>
&nbsp;<br>
Method&nbsp;gets&nbsp;reply&nbsp;from&nbsp;the&nbsp;module&nbsp;and&nbsp;determines&nbsp;if&nbsp;the<br>
the&nbsp;reply&nbsp;is&nbsp;valid&nbsp;or&nbsp;if&nbsp;the&nbsp;serial&nbsp;port&nbsp;timed&nbsp;out.</tt></dd></dl>

<dl><dt><a name="SPO2-test_power"><strong>test_power</strong></a>(self)</dt><dd><tt><a href="#SPO2-test_power">test_power</a>()<br>
&nbsp;<br>
Method&nbsp;receives&nbsp;reply&nbsp;to&nbsp;from&nbsp;the&nbsp;module&nbsp;and&nbsp;determines&nbsp;whether&nbsp;a&nbsp;the<br>
serial&nbsp;port&nbsp;timed&nbsp;out&nbsp;or&nbsp;there&nbsp;is&nbsp;a&nbsp;packet&nbsp;received.</tt></dd></dl>

<dl><dt><a name="SPO2-verify_checksum"><strong>verify_checksum</strong></a>(self, packet)</dt><dd><tt><a href="#SPO2-verify_checksum">verify_checksum</a>(packet)&nbsp;-&gt;&nbsp;data&nbsp;contained&nbsp;in&nbsp;the&nbsp;packet<br>
&nbsp;<br>
Method&nbsp;checks&nbsp;if&nbsp;the&nbsp;checksum&nbsp;contained&nbsp;in&nbsp;the&nbsp;packet<br>
corresponds&nbsp;to&nbsp;the&nbsp;data&nbsp;that&nbsp;the&nbsp;packet&nbsp;contains.&nbsp;If&nbsp;not,<br>
None&nbsp;type&nbsp;is&nbsp;returned.&nbsp;If&nbsp;packet&nbsp;is&nbsp;valid,&nbsp;the&nbsp;data&nbsp;will<br>
be&nbsp;returned.</tt></dd></dl>

</td></tr></table></td></tr></table>
</body></html>